<head>
<title>Horizontal CFB Scoreboard by Solrac8080</title>
<link rel="icon" type="img/png" href="https://github.com/ionic-team/ionicons/raw/master/png/512/ios7-americanfootball.png">
<script src="https://rawgit.com/Solrac8080/cfb-horizontal-scoreboard/dev/cfbdata.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">


<style>
html {
	-ms-overflow-style: -ms-autohiding-scrollbar;
}
::-webkit-scrollbar { 
    display: none; 
	}
body{
	margin:0px;
	font-size: 17px
}
.wide{
	height: 220px;
	width: 2000px;
}
.box{
	position: relative;
	display: inline;
	height: 60;
	width: 95%;
	background-image: url(https://i.imgur.com/UBLceGW.png);
	float: left;
	border: 0px;
	border-radius: 5px;
	padding: 5px;
	margin: 2px;
	box-shadow: 0px 3px 5px #888888;
}
.divider{
	width:240px;
	height:220px;
	float:left;
}
.lefthalf{
	width:153px;
	float:left;
}
.righthalf{
	width:75px;
	float:right;
	text-align: right;
}
.title{
	font-weight: bold;
}
.red{
	background-image: url(https://i.imgur.com/PzoNnXT.png);
}
.team{
	position: relative;
}
.winner{
	font-weight: bold;
	color: red;
}
</style>

<script>
function isOdd(num) { return num % 3;}
function getdata(callback){
	cfbdata.scoreboard.getScoreboard({
		groups: 80,
		year: 2017,
		week: 5
	}).then((data) => {
		var games =[]
		for (j =0;j<data.events.length;j++){
			games.push(data.events[j])
		}
		//console.log(games)
		callback(games)
	})
}
var firstload=1
var scores=[]
function writehtml(){
	getdata( function(games){
	var counter = 0
	var text =[]
	console.log(games)
	for (var i=0;i<games.length;i++){
		var home=games[i].competitions[0].competitors[0]
		var away=games[i].competitions[0].competitors[1]
		var game=games[i]
		var Title = moment(game.date).format('dddd hh:mm a')
		var Period = game.status.type.description
		if (game.status.type.description=="In Progress"||game.status.type.description=="Live"){
			Title=game.competitions[0].situation.shortDownDistanceText+' '+game.status.displayClock
			Period=game.status.period
			switch(Period){
				case 1:
					Period=Period+'st'
					break;
				case 2:
					Period=Period+'nd'
					break;
				case 3:
					Period=Period+'rd'
					break;
				case 4:
					Period=Period+'th'
					break;
			}
		}
		var hometeam=home.team.location
		var awayteam=away.team.location
		if (hometeam.length>12){
			hometeam=home.team.abbreviation
		}
		if (awayteam.length>12){
			awayteam=away.team.abbreviation
		}
		if (game.status.type.description=="Canceled"){continue;}
		if (home.score==scores[home.team.location]){var homeclass='team';}else{var homeclass='team hig'}
		if (away.score==scores[away.team.location]){var awayclass='team'}else{var awayclass='team hig'}
		if(game.competitions[0].hasOwnProperty('situation')){
			if (game.competitions[0].situation.possession==home.id){homeclass=homeclass+' ion-ios-americanfootball'}
			if (game.competitions[0].situation.possession==away.id){awayclass=awayclass+' ion-ios-americanfootball'}
		}
		if (game.status.type.description=="Scheduled"){
			if (game.competitions[0].broadcasts.length!=0){
				Period=game.competitions[0].broadcasts[0].names[0]
			}
		}
		var boxclass='box'
		if(game.competitions[0].hasOwnProperty('situation')){
			if(game.competitions[0].situation.isRedZone){
				boxclass=boxclass+' red'}
		}
		var homewin='';
		var awaywin='';
		if (game.status.type.description=='Final'){
			if(home.winner){homewin='winner';homeclass='winner';Title=hometeam+' won!';}
			if(away.winner){awaywin='winner';awayclass='winner';Title=awayteam+' won!';}
		}
		if (home.curatedRank.current!=99){hometeam=home.curatedRank.current+' '+hometeam}
		if (away.curatedRank.current!=99){awayteam=away.curatedRank.current+' '+awayteam}
		//WRITING HTML
		if(isOdd(counter)==0){text.push('<div class="divider">\n')}
		text.push('<div class="'+boxclass+'">\n')
		text.push('<div class="lefthalf">\n')
		text.push('<div class="title">\n')
		text.push(Title)
		text.push('</div>\n')
		text.push('<div class="'+homewin+'">\n')
		text.push('<img src="'+home.team.logo+'"style="width: 15px;">')
		text.push(hometeam)
		text.push('</div>\n')
		text.push('<div class="'+awaywin+'">\n')
		text.push('<img src="'+away.team.logo+'"style="width: 15px;">')
		text.push(awayteam)
		text.push('</div>\n')
		text.push('</div>\n')
		text.push('<div class="righthalf">\n')
		text.push('<div class="title">\n')
		text.push(Period)
		text.push('</div>\n')
		text.push('<div class="'+homeclass+'">\n')
		text.push(home.score)
		text.push('</div>\n')
		text.push('<div class="'+awayclass+'">\n')
		text.push(away.score)
		text.push('</div>\n')
		text.push('</div>\n')
		text.push('</div>\n')
		if(isOdd(counter)==2){text.push('</div>\n')}
		//DONE WRITING HTML
		counter++
		scores[home.team.location]=home.score
		scores[away.team.location]=away.score
	}
	$('.wide').width(Math.ceil(counter/3)*240+'px');
	$('.wide').html(text.join(''))
	if (firstload==0){
		$('.hig').effect('highlight', 6000);
	}
	firstload=0
	})

};

writehtml()
setInterval(function(){
	writehtml()
}, 10000);

</script>
</head>
<body>
<div class="wide">

</div>
</body>
