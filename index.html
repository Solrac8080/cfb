
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js" type="text/javascript"></script>

	
	<style>
	body{
		background-color: #0a5868;
		color: white;
		font-family: 'Perpetua';
		font-size: 12px;
		font-weight: bold;
		}
	.floatingbox {
		border-radius: 10px;
		background-color: #00161e;
		float: left;
		width:150px;
		height:85px;
		margin:2px;
		border:1px solid;
		}
	.split1 {
		float: left;
		width:70%;
		height:100%;
		margin-left:5px;
		}
	.split2 {
		float: right;
		width:20%;
		height:100%;
		text-align: right;
		margin-right:5px
		}
	</style>
	<script>
		var leng=0;
		var jsondata=[]
		
		function makedata(json) {
			var games=[];
			for(var i=0;i<json.scoreboard.length;i++){
				leng=leng+json.scoreboard[i].games.length;
				for(j=0;j<json.scoreboard[i].games.length;j++){
					games.push(json.scoreboard[i].games[j]);
				}
			}
			makehtml(games)
			
		}
		
		function updatedata(json) {
			var games=[];
			for(var i=0;i<json.scoreboard.length;i++){
				leng=leng+json.scoreboard[i].games.length;
				for(j=0;j<json.scoreboard[i].games.length;j++){
					games.push(json.scoreboard[i].games[j]);
				}
			}
			updatehtml(games)
			
		}

		
		
		function make(){
			$.ajax({
				url: "http://data.ncaa.com/jsonp/scoreboard/football/fbs/2017/02/scoreboard.html?callback=makedata",
				dataType: "jsonp"
			})
		}
		
		function update(){
			$.ajax({
				url: "http://data.ncaa.com/jsonp/scoreboard/football/fbs/2017/02/scoreboard.html?callback=updatedata",
				dataType: "jsonp"
			})
		}
		
		
		
		
		
		function makehtml(data) {
				$('body').html('')
				for(i=0;i<data.length;i++){
					//if(data[i].conference.includes('big-12')==false&&data[i].conference.includes('top-25')==false){continue;}
					if (data[i].gameState=='cancelled'){continue;}
					var hrank = '';
					var arank = '';
					if (data[i].home.teamRank >0){hrank='('+data[i].home.teamRank+') '}
					if (data[i].away.teamRank >0){arank='('+data[i].away.teamRank+') '}
					$('body').append('<div class="floatingbox"><div class="split1"><p class="'+data[i].id+'-time">'+moment.unix(data[i].startTimeEpoch).fromNow()+'</p><p>'+hrank+data[i].home.nameRaw+'</p><p>'+arank+data[i].away.nameRaw+'</p></div><div class="split2"><p class="'+data[i].id+'-period">'+data[i].gameState+'</p><p class="'+data[i].id+'-home">'+data[i].home.currentScore+'</p><p class="'+data[i].id+'-away">'+data[i].away.currentScore+'</p></div></div>')
				}
		}
		
		function updatehtml(data) {
				for(k=0;k<data.length;k++){
					if(data[k].gameState=='pre'||data[k].gameState=='final'){
						$("."+data[k].id+"-time").html(moment.unix(data[k].startTimeEpoch).fromNow());
					}
					$("."+data[k].id+"-period").html(data[k].gameState);
					$("."+data[k].id+"-home").html(data[k].home.currentScore);
					$("."+data[k].id+"-away").html(data[k].away.currentScore);
				}
		}
		setInterval(function(){
			update()
		}, 15000);
	</script>
	
</head>

<body onload='make()'>

</body>
